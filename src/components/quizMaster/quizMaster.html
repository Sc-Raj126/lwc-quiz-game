<template>
  <div class="quiz-container">
    <header class="quiz-header">
      <h1>LWC QuizMaster</h1>
      <p class="subtitle">Test your LWC Knowledge</p>
    </header>

    <!-- Quiz Active - Show Questions -->
    <template if:true={isQuizActive}>
      <section class="quiz-section">
        <!-- Progress Bar -->
        <div class="progress-section">
          <div class="progress-bar">
            <div class="progress-fill" style={progressStyle}></div>
          </div>
          <p class="progress-text">{currentQuestion + 1} of {totalQuestions}</p>
        </div>

        <!-- Question Display -->
        <div class="question-container">
          <h2 class="question-title">{question.question}</h2>
          
          <!-- Answer Options -->
          <div class="options-container">
            <template for:each={question.options} for:item="option" for:index="index">
              <button
                key={index}
                class={getOptionButtonClass(index)}
                onclick={handleSelectOption}
                data-option-index={index}
                disabled={isAnswered}
              >
                {option}
              </button>
            </template>
          </div>
        </div>

        <!-- Navigation Buttons -->
        <div class="button-container">
          <button 
            class="btn btn-secondary" 
            onclick={handlePrevious} 
            disabled={currentQuestion === 0}
          >
            Previous
          </button>
          <button 
            class="btn btn-primary" 
            onclick={handleNext} 
            disabled={!isAnswered}
          >
            {currentQuestion === totalQuestions - 1 ? 'Finish' : 'Next'}
          </button>
        </div>
      </section>
    </template>

    <!-- Results Section - Show After Quiz Complete -->
    <template if:true={isResultsActive}>
      <section class="results-section">
        <div class="results-container">
          <!-- Final Score -->
          <div class="score-display">
            <p class="score-text">{score} / {totalQuestions}</p>
          </div>

          <!-- Result Message -->
          <h2 class="result-title">Quiz Completed!</h2>
          <p class="result-message">{resultMessage}</p>

          <!-- Performance Statistics -->
          <div class="stats-container">
            <div class="stat-item">
              <p class="stat-label">Correct Answers</p>
              <p class="stat-value">{score}</p>
            </div>
            <div class="stat-item">
              <p class="stat-label">Accuracy</p>
              <p class="stat-value">{accuracy}%</p>
            </div>
            <div class="stat-item">
              <p class="stat-label">Time Taken</p>
              <p class="stat-value">{timeTaken}s</p>
            </div>
          </div>

          <!-- Restart Button -->
          <button class="btn btn-primary btn-large" onclick={handleRestartQuiz}>
            Restart Quiz
          </button>
        </div>
      </section>
    </template>
  </div>
</template>
